!function(){"use strict";class e{constructor(e,t,s,r,i){let{name:n,link:o,_id:a,isLiked:l}=e;this.name=n,this.link=o,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=r,this.id=a,this.isLiked=l,this._handleLikeClick=i}_setEventListeners(){this.cardLikeButton.addEventListener("click",(()=>{this._handleLikeClick(this)})),this._cardDeleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this)}))}_checkLike(){if(1==this.isLiked)return this.cardLikeButton.classList.add("card__like-button_active"),this.isLiked}deleteElement(){this._cardElement.remove(),this._cardElement=null}_setCardProperties(){this._cardImage.src=this.link,this._cardImage.alt=this.name,this._cardTitle.textContent=this.name,this._checkLike()}generateCardElement(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".cards__card").cloneNode(!0),this.cardLikeButton=this._cardElement.querySelector(".cards__like-button"),this._cardDeleteButton=this._cardElement.querySelector(".cards__delete-button"),this._cardImage=this._cardElement.querySelector(".cards__image"),this._cardTitle=this._cardElement.querySelector(".cards__title"),this._setEventListeners(),this._setCardProperties(),this._cardElement}toggleLike(){this.cardLikeButton.classList.contains("card__like-button_active")?(this.cardLikeButton.classList.remove("card__like-button_active"),this.isLiked=!1):(this.cardLikeButton.classList.add("card__like-button_active"),this.isLiked=!0)}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this.inputElements=Array.from(this._formElement.querySelectorAll(this._inputSelector))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}_setEventListeners(){this.inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_checkInputValidity(e){if(this._errorMessageElement=this._formElement.querySelector(`#${e.id}-error`),!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_showInputError(e){e.classList.add(this._inputErrorClass),this._errorMessageElement.textContent=e.validationMessage,this._errorMessageElement.classList.add(this._errorClass)}_hideInputError(e){e.classList.remove(this._inputErrorClass),this._errorMessageElement.textContent="",this._errorMessageElement.classList.remove(this._errorClass)}_toggleButtonState(){this.inputElements.some(this._hasInvalidInput)?this.disableSubmitButton():this.enableSubmitButton()}_hasInvalidInput(e){return!e.validity.valid}disableSubmitButton(){return this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableSubmitButton(){return this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}resetFormValidation(){this._toggleButtonState(),this.inputElements.forEach((e=>this._hideInputError(e)))}test(){console.log(this)}clearInputs(){this.inputElements.forEach((e=>{e.value=""}))}}const s={},r=document.querySelector(".profile__edit-button"),i=document.querySelector(".profile__add-button");document.querySelector(".modal__input"),document.querySelector("#about_me"),Array.from(document.querySelectorAll(".cards__delete-button")),Array.from(document.querySelectorAll(".modal__box"));let n={};n={name:".profile__name",job:".profile__occupation"};const o=document.querySelector(".profile__avatar-button");class a{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._pageOverlay=document.querySelector(".page"),this._closeButton=this._popupElement.querySelector(".modal__exit"),this._popupBox=this._popupElement.querySelector(".modal__box")}open(){this._popupElement.classList.add("modal_opened"),this._setAltEventListeners()}close(){this._popupElement.classList.remove("modal_opened"),this._unsetAltEventListeners()}setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close()))}_handleEscClose=e=>{"Escape"==e.key&&this.close()};_handlePageClick=e=>{e.target.classList.contains("modal__box")||this.close()};_handleBoxClick=e=>{e.stopImmediatePropagation()};_setAltEventListeners(){this._pageOverlay.addEventListener("mousedown",this._handlePageClick),document.addEventListener("keydown",this._handleEscClose),this._popupBox.addEventListener("mousedown",this._handleBoxClick)}_unsetAltEventListeners(){this._pageOverlay.removeEventListener("mousedown",this._handlePageClick),document.removeEventListener("keydown",this._handleEscClose),this._popupBox.removeEventListener("mousedown",this._handleBoxClick)}}class l extends a{constructor(e,t){let{handleFormSubmit:s}=t;super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=s,this._inputs=this._popupForm.querySelectorAll(".modal__input"),this._submitButton=this._popupForm.querySelector(".modal__save"),this._submitButtonOriginal=this._submitButton.textContent}getInputValues(){return this._userData={},this._inputs.forEach((e=>{this._userData[e.id]=e.value})),this._userData}setInputValues(e){this._inputs.forEach((t=>{t.value=e[t.id]}))}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this.getInputValues())})),super.setEventListeners()}renderLoading(e,t){this._submitButton.textContent=e?t:this._submitButtonOriginal}}let u="";function c(e){f.open(),u=e}function d(t){const s=new e(t,"#card",h,c,_).generateCardElement();v.addItem(s)}function h(e){L.open(e)}function _(e){e.isLiked?p.unlikeCard(e.id).then((()=>{e.toggleLike()})).catch((e=>{console.log(e)})):p.likeCard(e.id).then((()=>{e.toggleLike()})).catch((e=>{console.log(e)}))}const p=new class{constructor(e){this._options=e,this._baseUrl=this._options.baseUrl,this.isComplete=!1}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}_request(e){return fetch(this._baseUrl+e,this._options).then(this._checkResponse).finally((()=>{this._reset()}))}_reset(){this._options.method="",this._options.body=null}_fetchX=(e,t)=>(this._options.method=t,this._request(e));_sendX=(e,t,s)=>(this._options.method=s,this._options.body=JSON.stringify(t),this._request(e));getCards(){return this._fetchX("/cards","GET")}postCard(e){return this._sendX("/cards",e,"POST")}patchCard(e){return this._sendX("/cards",e,"PATCH")}likeCard(e){return this._fetchX(`/cards/${e}/likes`,"PUT")}unlikeCard(e){return this._fetchX(`/cards/${e}/likes`,"DELETE")}deleteCard(e){return this._fetchX(`/cards/${e}`,"DELETE")}getUserInfo(){return this._fetchX("/users/me","GET")}patchInfo(e){return this._sendX("/users/me",e,"PATCH")}patchAvatar(e){return this._sendX("/users/me/avatar",e,"PATCH")}}({method:"",baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"13f0334e-73a3-4382-9d72-604d6520bb47","Content-Type":"application/json"},body:null}),m=new class{constructor(e,t){let{name:s,job:r}=e;this._profileInfo=document.querySelector(".profile__info"),this._name=this._profileInfo.querySelector(s),this._job=this._profileInfo.querySelector(r),this._avatar=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,job:this._job.textContent,source:this._avatar.src}}setUserInfo(e){let{newName:t,newJob:s}=e;this._name.textContent=t,this._job.textContent=s}setAvatar(e){this._avatar.src=e}}(n,"#avatar"),E=new l(".modal",{handleFormSubmit:e=>{let{name:t,about_me:r}=e;E.renderLoading(!0,"Submitting profile changes..."),p.patchInfo({name:t,about:r}).then((()=>{m.setUserInfo({newName:t,newJob:r}),s["profile-form"].disableSubmitButton()})).then((()=>{E.close()})).catch((e=>{console.log(e),E.renderLoading(!0,"Error while changing profile info! Please wait and try again.")})).finally((()=>{E.renderLoading(!1)}))}}),b=new l(".add-popup",{handleFormSubmit:e=>{let{title:t,image_url:r}=e;const i={name:t,link:r};b.renderLoading(!0,"Creating and adding card..."),p.postCard(i).then((e=>{d(e),s["add-photo-form"].disableSubmitButton()})).then((()=>{b.close(),s["add-photo-form"].clearInputs()})).catch((e=>{b.renderLoading(!0,"Error while creating card! Please wait and try again."),console.log(e)})).finally((()=>{b.renderLoading(!1)}))}}),v=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}clear(){this._container.innerHTML=""}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:d},".cards"),g=new l(".avatar-popup",{handleFormSubmit:e=>{let{avatarUrl:t}=e;g.renderLoading(!0,"Changing avatar..."),p.patchAvatar({avatar:t}).then((()=>{m.setAvatar(t),s["avatar-form"].disableSubmitButton()})).then((()=>{g.close(),s["avatar-form"].clearInputs()})).catch((e=>{console.log(e),g.renderLoading(!0,"Error while changing avatar! Please wait and try again")})).finally((()=>{g.renderLoading(!1)}))}}),f=new class extends a{constructor(e,t){let{handleFormSubmit:s}=t;super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=s,this.submitButton=this._popupForm.querySelector(".modal__save"),this._submitButtonOriginal=this.submitButton.textContent}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(()=>{this._handleFormSubmit()}))}renderLoading(e,t){this.submitButton.textContent=e?t:this._submitButtonOriginal}}(".delete-popup",{handleFormSubmit:function(){f.renderLoading(!0,"Deleting..."),p.deleteCard(u.id).then((()=>{u.deleteElement()})).then((()=>{f.close(),u=""})).catch((e=>{console.log(e),f.renderLoading(!0,"Error while deleting! Please wait and try again!")})).finally((()=>{f.renderLoading(!1),s["delete-photo-form"].enableSubmitButton()}))}}),L=new class extends a{constructor(e){super({popupSelector:e}),this._popupPicture=this._popupElement.querySelector("#preview-popup"),this._popupImage=this._popupElement.querySelector("#preview-box").querySelector(".preview-popup__image"),this._popupSubtitle=this._popupElement.querySelector("#preview-box").querySelector(".preview-popup__subtitle")}open(e){let{name:t,link:s}=e;this._popupImage.src=s,this._popupImage.alt=t,this._popupSubtitle.textContent=t,super.open()}}(".preview-popup");var S;p.getCards().then((e=>{v.renderItems(e)})).catch((e=>{console.log("Error while loading cards! Please try again later. "+e)})),E.setEventListeners(),r.addEventListener("click",(function(){E.open(),function(){const{name:e,job:t}=m.getUserInfo();E.setInputValues({name:e,about_me:t})}(),s["profile-form"].disableSubmitButton()})),b.setEventListeners(),f.setEventListeners(),o.addEventListener("click",(function(){g.open()})),g.setEventListeners(),p.getUserInfo().then((e=>{m.setUserInfo({newName:e.name,newJob:e.about}),m.setAvatar(e.avatar)})).catch((e=>{console.log("Unable to load profile/avatar info! Please wait and try again. "+e)})),L.setEventListeners(),i.addEventListener("click",(function(){b.open()})),S={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(S.formSelector)).forEach((e=>{const r=new t(S,e),i=e.getAttribute("name");s[i]=r,r.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1gsSUEyQjBCc0gsRUh4REosQ0FDcEI1SyxhQUFjLGVBQ2RFLGNBQWUsZ0JBQ2ZFLHFCQUFzQixlQUN0QkUsb0JBQXFCLHlCQUNyQkUsZ0JBQWlCLDBCQUNqQkUsV0FBWSx3QkdtREtJLE1BQU1DLEtBQUt6QixTQUFTMEIsaUJBQWlCNEosRUFBTzVLLGVBQ3BEb0IsU0FBUzBKLElBQ2hCLE1BQU1DLEVBQVksSUFBSW5MLEVBQWNnTCxFQUFRRSxHQUN0Q0UsRUFBV0YsRUFBS0csYUFBYSxRQUNuQ3ZJLEVBQWVzSSxHQUFZRCxFQUMzQkEsRUFBVTlKLGtCQUFrQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBGb3JtTm9GaWVsZHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWR9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2spIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7IC8vbWFraW5nIHRoZXNlIHR3byBwcm9wZXJ0aWVzIHB1YmxpYyBzaW5jZSBJIHVzZSB0aGVtIGluIHRoZSBoYW5kbGVwaG90b2NsaWNrIGZ1bmN0aW9uXHJcbiAgICB0aGlzLmxpbmsgPSBsaW5rOyAvL1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7ICAgIFxyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuaWQgPSBfaWQ7XHJcbiAgICB0aGlzLmlzTGlrZWQgPSBpc0xpa2VkO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7ICAgIFxyXG4gIH1cclxuXHJcbiAgX2NoZWNrTGlrZSgpIHtcclxuICAgIGlmICh0aGlzLmlzTGlrZWQgPT0gdHJ1ZSkge1xyXG4gICAgICB0aGlzLmNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgIHJldHVybiB0aGlzLmlzTGlrZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWxldGVFbGVtZW50KCkgey8vbWFraW5nIHB1YmxpYywgY2hhbmdlZCBmcm9tIGhhbmRsZWRlbGV0ZWNsaWNrXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9zZXRDYXJkUHJvcGVydGllcygpIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xyXG4gICAgdGhpcy5fY2hlY2tMaWtlKCk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmRFbGVtZW50KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2NhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIC8vZGVmaW5pbmcgb3RoZXIgY2xhc3MgdmFyaWFibGVzIGhlcmUgdG8gY2FsbCBpbiBjaGlsZCBmdW5jdGlvbnNcclxuICAgIHRoaXMuY2FyZExpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKC8vbWFraW5nIHB1YmxpY1xyXG4gICAgICBcIi5jYXJkc19fbGlrZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkc19fZGVsZXRlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX190aXRsZVwiKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9zZXRDYXJkUHJvcGVydGllcygpOyAgICBcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUxpa2UoKSB7Ly90byBjb250YWluIGxpa2UgbG9naWMgaW4gdGhlIGNhcmRcclxuICAgIGlmICghdGhpcy5jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIikpXHJcbiAgICB7ICAgICAgXHJcbiAgICAgIHRoaXMuY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgICAgdGhpcy5pc0xpa2VkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLmNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgIHRoaXMuaXNMaWtlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH0gIFxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuaW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLmlucHV0RWxlbWVudHMuc29tZSh0aGlzLl9oYXNJbnZhbGlkSW5wdXQpKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbmFibGVTdWJtaXRCdXR0b24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRFbGVtZW50KSB7XHJcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICB9XHJcblxyXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICAvL21ha2luZyBwdWJsaWMgc28gSSBjYW4ganVzdCBjYWxsIHdoZXJldmVyIGlmIEkgbmVlZCB0b1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICByZXR1cm4gKHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlU3VibWl0QnV0dG9uKCkgey8vbWFraW5nIHB1YmxpYyBzbyBJIGNhbiB1dGlsaXplIHRoaXMgd2hlcmUgbmVlZCBiZVxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICByZXR1cm4gKHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlKTtcclxuICB9XHJcblxyXG4gIC8vcmVzZXRGb3JtVmFsaWRhdGlvbihpbnB1dEVsZW1lbnQpIHtcclxuICByZXNldEZvcm1WYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIC8vdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIHRoaXMuaW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dCkgPT4gdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpKTsvL3R3ZWFraW5nIHRoaXMgdG8gYmUgb25lIGNhbGwgaGVyZSBpbnN0ZWFkIG9mIGl0ZXJhdGl2ZSBpbiBpbmRleFxyXG4gIH1cclxuXHJcbiAgdGVzdCgpIHsvL2luIGNhc2UgSSBuZWVkIHRvIHNlZSBob3cgdGhpcyBpcyBiZWluZyBsb2FkZWQvcGFzc2VkL3RyZWF0ZWRcclxuICAgIGNvbnNvbGUubG9nKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXJJbnB1dHMoKSB7Ly9hZGRpbmcgdGhpcyB0byBjbGVhciB3aGVuIHN1Ym1pdHRpbmcgc29tZSBmaWVsZHMsIGFuZCBwZXJoYXBzIG5vdCBvdGhlcnNcclxuICAgIHRoaXMuaW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy9WQVJJQUJMRVMgR0VUIFlPVVIgVkFSSUFCTEVTIEhFUkVcclxuY29uc3Qgb2JqZWN0MSA9IHtcclxuICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxufTtcclxuXHJcbmNvbnN0IG9iamVjdDIgPSB7XHJcbiAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxufTtcclxuXHJcbmNvbnN0IG9iamVjdDMgPSB7XHJcbiAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxufTtcclxuXHJcbmNvbnN0IG9iamVjdDQgPSB7XHJcbiAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbn07XHJcblxyXG5jb25zdCBvYmplY3Q1ID0ge1xyXG4gIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbn07XHJcblxyXG5jb25zdCBvYmplY3Q2ID0ge1xyXG4gIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgb2JqZWN0MSxcclxuICBvYmplY3QyLFxyXG4gIG9iamVjdDMsXHJcbiAgb2JqZWN0NCxcclxuICBvYmplY3Q1LFxyXG4gIG9iamVjdDYsXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IFwiLm1vZGFsXCI7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkUGhvdG9Qb3B1cCA9IFwiLmFkZC1wb3B1cFwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRQcmV2aWV3UG9wdXAgPSBcIi5wcmV2aWV3LXBvcHVwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgbmFtZUZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRcIik7XHJcblxyXG5leHBvcnQgY29uc3QgYWJvdXRNZUZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhYm91dF9tZVwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWxldGVDb25maXJtUG9wdXAgPSBcIi5kZWxldGUtcG9wdXBcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWxldGVCdXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcmRzX19kZWxldGUtYnV0dG9uXCIpKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZVwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBtb2RhbEJveGVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19ib3hcIikpO1xyXG5cclxuZXhwb3J0IGxldCB1c2VyRGF0YSA9IHt9O1xyXG51c2VyRGF0YSA9IHtcclxuICBuYW1lOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgam9iOiBcIi5wcm9maWxlX19vY2N1cGF0aW9uXCJcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBhdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBlZGl0QXZhdGFyUG9wdXAgPSBcIi5hdmF0YXItcG9wdXBcIjtcclxuZXhwb3J0IGNvbnN0IGF2YXRhclNlbGVjdG9yID0gXCIjYXZhdGFyXCI7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcGFnZU92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBhZ2VcIik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19leGl0XCIpO1xyXG4gICAgdGhpcy5fcG9wdXBCb3ggPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYm94XCIpOy8vYWRkZWQgdGhpcyBpbiBmb3Igc3BlY2lmaWNpdHksIHNlZSBiZWxvd1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5fc2V0QWx0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLl91bnNldEFsdEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZVBhZ2VDbGljayA9IChldnQpID0+IHtcclxuICAgIGlmICghZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fYm94XCIpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFuZGxlQm94Q2xpY2sgPSAoZXZ0KSA9PiB7Ly9mb3Igc3RvcHBpbmcgY2xvc2UgZXZlbnRzIHdoZW4gY2xpY2tpbmcgdGhlIG1vZGFsIGl0c2VsZlxyXG4gICAgZXZ0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpOy8vZGVmZWF0ZWQgYnkgYSBzdHVwaWQgc3BlbGxpbmcgZXJyb3IuIFwicHJvcE9nYXRpb25cIiBpbnN0ZWFkIG9mIFwicHJvcEFnYXRpb25cIlxyXG4gIH1cclxuXHJcbiAgX3NldEFsdEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy90aGlzIGlzIGZvciBhZGRpbmcgYWx0ZXJuYXRpdmUgY2xvc2luZyBldmVudCBsaXN0ZW5lcnMtIGVzY2FwZSBhbmQgcGFnZSBjbGlja1xyXG4gICAgdGhpcy5fcGFnZU92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVQYWdlQ2xpY2spO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpOyAgICBcclxuICAgIHRoaXMuX3BvcHVwQm94LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQm94Q2xpY2spOy8vaGFkIHRvIGJlIG1vcmUgc3BlY2lmaWMgd2l0aCB3aGVyZSB0byBhdHRhY2ggdGhlIGV2dCBoYW5kbGVyXHJcbiAgfVxyXG5cclxuICBfdW5zZXRBbHRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vZm9yIG51bGxpZnlpbmcgdGhlIGFib3ZlIG9uIGNsb3NlIHRvIHNhdmUgcmVzb3VyY2VzXHJcbiAgICB0aGlzLl9wYWdlT3ZlcmxheS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZVBhZ2VDbGljayk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEJveC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZUJveENsaWNrKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHsgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgLy9cclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uT3JpZ2luYWwgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7Ly9hcyB3aXRoIHRoZSBvdGhlciBwb3B1cCBmb3JtIG9iamVjdCB0aGlzIGlzIHRvIHN0b3JlIHRoZSBpbml0aWFsIHZhbHVlIG9mIHRoZSBzdWJtaXQgYnV0dG9uIHRleHQgYW5kIGtlZXAgaXQgJ3NhZmUnXHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dFZhbHVlcygpIHsvL21ha2luZyBwdWJsaWNcclxuICAgIHRoaXMuX3VzZXJEYXRhID0ge307XHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fdXNlckRhdGFbaW5wdXQuaWRdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLl91c2VyRGF0YTtcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQuaWRdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG4gIFxyXG4gIHJlbmRlckxvYWRpbmcoYm9vbCwgbG9hZFRleHQpIHtcclxuICAgIGlmKGJvb2wpIHsgICAgICAgIFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBsb2FkVGV4dDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25PcmlnaW5hbDtcclxuICAgIH1cclxufVxyXG59XHJcbiIsIi8vaW1wb3J0c1xyXG5cclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7ICBcclxuICBmb3JtVmFsaWRhdG9ycyxcclxuICBlZGl0UHJvZmlsZUJ1dHRvbixcclxuICBjYXJkQWRkQnV0dG9uLFxyXG4gIGVkaXRQcm9maWxlUG9wdXAsXHJcbiAgY2FyZFByZXZpZXdQb3B1cCwgIFxyXG4gIGNvbmZpZywgIFxyXG4gIGFkZFBob3RvUG9wdXAsXHJcbiAgdXNlckRhdGEsXHJcbiAgYXZhdGFyQnV0dG9uLFxyXG4gIGVkaXRBdmF0YXJQb3B1cCxcclxuICBhdmF0YXJTZWxlY3RvclxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IFBvcHVwRm9ybU5vRmllbGRzIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwRm9ybU5vRmllbGRzLmpzXCI7Ly90b3RhbGx5IHdoYWNrIHRoYXQgSSBtaXNzZWQgbGFiZWxsaW5nIHRoaXMgZmlsZSBhcyBqcy4gT2ggd2VsbC4uLlxyXG5cclxuLy92YXJpYWJsZXNcclxuXHJcbmxldCBkZWxldGVJZGVudGlmaWNhdGlvbiA9IFwiXCI7IC8vSSdtIHVzaW5nIHRoaXMgdmFyaWFibGUgYXMgc3RvcmFnZSBmb3IgaWRlbnRpZnlpbmcgd2hpY2ggY2FyZCBnZXRzIGNsaWNrZWQgZm9yIGRlbGV0aW9uIHdoaWNoIHRoZSBkZWxldGUgc3VibWl0IGV2ZW50IGNhbiB0aGVuIGFjY2VzcyBhbmQga25vdyB3aGF0IElEIHRvIHN1cHBseSB0aGUgQVBJIGFuZCBudWtlIGZyb20gdGhlIERPTS5cclxuLy9Gb3Igc29tZSByZWFzb24gd2hlbiBJIHNldCBpdCB0byBiZSBpbXBvcnRlZC9leHBvcnRlZCBpdCBtZXNzZXMgd2l0aCB0aGUgYWNjZXNzIG9mIGJvdGggdGhlIGRpZmZlcmVudCBmdW5jdGlvbnMgdGhhdCBjYWxsIGl0IGFuZCBpdCBzcGl0cyBvdXQgZXJyb3JzLiBVbnRpbCBJIGNhbiByZWFkaWx5IGZpZ3VyZSBvdXQgd2h5IG9yIGVuZ2luZWVyIHRoZSBzaXR1YXRpb24gdG8gbm90IG5lZWQgdGhpcyB2YXJpYWJsZSBpbiB0aGUgZmlyc3QgcGxhY2UgSSBhbSBnb2luZyB0byBicmVhayBwcm90b2NvbCBoZXJlIGFuZCBoYXZlIHRoaXMgdmFyaWFibGUgc3RvcmVkIGluIHRoZSBpbmRleC4gU29ycnkhXHJcblxyXG4vL2Z1bmN0aW9uc1xyXG5cclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtKCkge1xyXG4gIGNvbnN0IHtuYW1lLCBqb2J9ID0gdXNlci5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVQb3B1cC5zZXRJbnB1dFZhbHVlcyh7bmFtZSwgYWJvdXRfbWU6IGpvYn0pO1xyXG4gIFxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZUJ1dHRvbkNsaWNrKCkge1xyXG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWZvcm1cIl0uZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxCdXR0b25DbGljayhjYXJkKSB7XHJcbiAgZGVsZXRlRGlhbG9ndWUub3BlbigpO1xyXG4gIGRlbGV0ZUlkZW50aWZpY2F0aW9uID0gY2FyZDtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkKSB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGNhcmQsIFwiI2NhcmRcIiwgaGFuZGxlUGhvdG9DbGljaywgaGFuZGxlRGVsQnV0dG9uQ2xpY2ssIGhhbmRsZUxpa2VDbGljayk7Ly9hbW1lbmRlZCB0aGUgZGVsZXRlIGFuZCBsaWtlIGhhbmRsZXIgc28gaXQgY291bGQgdGVsbCB0aGUgb3RoZXIgcG9wdXAgdG8gb3BlbiB3aGVuIHRoZSBDYXJkJ3MgZGVsIGJ1dHRvbiB3YXMgcHJlc3NlZCBhbmQgdXRpbGl6ZSB0aGUgYXBpLiAgXHJcbiAgY29uc3QgbmV3Q2FyZEVsZW1lbnQgPSBuZXdDYXJkLmdlbmVyYXRlQ2FyZEVsZW1lbnQoKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmRFbGVtZW50KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlU3VibWl0KCkge1xyXG4gIGRlbGV0ZURpYWxvZ3VlLnJlbmRlckxvYWRpbmcodHJ1ZSwgXCJEZWxldGluZy4uLlwiKTtcclxuICBhcGkuZGVsZXRlQ2FyZChkZWxldGVJZGVudGlmaWNhdGlvbi5pZClcclxuICAudGhlbigoKSA9PiB7XHJcbiAgICBkZWxldGVJZGVudGlmaWNhdGlvbi5kZWxldGVFbGVtZW50KCk7XHJcbiAgfSlcclxuICAudGhlbigoKSA9PiB7ICAgIFxyXG4gICAgICBkZWxldGVEaWFsb2d1ZS5jbG9zZSgpO1xyXG4gICAgICBkZWxldGVJZGVudGlmaWNhdGlvbiA9IFwiXCI7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIGRlbGV0ZURpYWxvZ3VlLnJlbmRlckxvYWRpbmcodHJ1ZSwgXCJFcnJvciB3aGlsZSBkZWxldGluZyEgUGxlYXNlIHdhaXQgYW5kIHRyeSBhZ2FpbiFcIik7XHJcbiAgfSlcclxuICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICBkZWxldGVEaWFsb2d1ZS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgIGZvcm1WYWxpZGF0b3JzW1wiZGVsZXRlLXBob3RvLWZvcm1cIl0uZW5hYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUVkaXRBdmF0YXJDbGljaygpIHtcclxuICBhdmF0YXJQb3B1cC5vcGVuKClcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZVByb2ZpbGVBcGkoKSB7XHJcbiAgYXBpLmdldFVzZXJJbmZvKCkudGhlbihkYXRhID0+IHtcclxuICAgIHVzZXIuc2V0VXNlckluZm8oe25ld05hbWU6IGRhdGEubmFtZSwgbmV3Sm9iOiBkYXRhLmFib3V0fSk7XHJcbiAgICB1c2VyLnNldEF2YXRhcihkYXRhLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCJVbmFibGUgdG8gbG9hZCBwcm9maWxlL2F2YXRhciBpbmZvISBQbGVhc2Ugd2FpdCBhbmQgdHJ5IGFnYWluLiBcIiArIGVycik7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZEJ1dHRvbkNsaWNrKCkge1xyXG4gIGFkZFBvcHVwLm9wZW4oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUGhvdG9DbGljayhkYXRhKSB7XHJcbiAgaW1hZ2VCb3gub3BlbihkYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmQpIHtcclxuICBpZighY2FyZC5pc0xpa2VkKSB7XHJcbiAgICBhcGkubGlrZUNhcmQoY2FyZC5pZClcclxuICAgIC50aGVuKCAoKSA9PiB7XHJcbiAgICAgIGNhcmQudG9nZ2xlTGlrZSgpXHJcbiAgfSlcclxuICAgIC5jYXRjaCggKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgfSk7XHJcbiAgfVxyXG4gIGVsc2V7XHJcbiAgICBhcGkudW5saWtlQ2FyZChjYXJkLmlkKVxyXG4gICAgLnRoZW4oICgpID0+IHtcclxuICAgICAgY2FyZC50b2dnbGVMaWtlKClcclxuICB9KVxyXG4gICAgLmNhdGNoKCAoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm0pO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XHJcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLy9pbml0aWFsaXphdGlvbnNcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIG1ldGhvZDogXCJcIixcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIxM2YwMzM0ZS03M2EzLTQzODItOWQ3Mi02MDRkNjUyMGJiNDdcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgfSxcclxuICBib2R5OiBudWxsXHJcbn0pO1xyXG5cclxuY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyh1c2VyRGF0YSwgYXZhdGFyU2VsZWN0b3IpO1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oZWRpdFByb2ZpbGVQb3B1cCwge1xyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6ICh7IG5hbWUsIGFib3V0X21lIH0pID0+IHtcclxuICAgIHByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUsIFwiU3VibWl0dGluZyBwcm9maWxlIGNoYW5nZXMuLi5cIik7XHJcbiAgICBhcGkucGF0Y2hJbmZvKHtuYW1lLCBhYm91dDogYWJvdXRfbWV9KVxyXG4gICAgLnRoZW4oICgpID0+IHtcclxuICAgICAgdXNlci5zZXRVc2VySW5mbyh7IG5ld05hbWU6IG5hbWUsIG5ld0pvYjogYWJvdXRfbWUgfSk7XHJcbiAgICAgIGZvcm1WYWxpZGF0b3JzW1wicHJvZmlsZS1mb3JtXCJdLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgIH0pXHJcbiAgICAudGhlbiggKCkgPT4ge1xyXG4gICAgICAgIHByb2ZpbGVQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCggKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICBwcm9maWxlUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlLCBcIkVycm9yIHdoaWxlIGNoYW5naW5nIHByb2ZpbGUgaW5mbyEgUGxlYXNlIHdhaXQgYW5kIHRyeSBhZ2Fpbi5cIik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwcm9maWxlUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7ICAgICBcclxuXHJcbiAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IGFkZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oYWRkUGhvdG9Qb3B1cCwge1xyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6ICh7IHRpdGxlLCBpbWFnZV91cmw6IGltYWdlVXJsIH0pID0+IHtcclxuICAgIGNvbnN0IG5ld09iaiA9IHtcclxuICAgICAgbmFtZTogdGl0bGUsXHJcbiAgICAgIGxpbms6IGltYWdlVXJsXHJcbiAgICB9O1xyXG4gICAgYWRkUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlLCBcIkNyZWF0aW5nIGFuZCBhZGRpbmcgY2FyZC4uLlwiKTtcclxuICAgIGFwaS5wb3N0Q2FyZChuZXdPYmopXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICByZW5kZXJDYXJkKGRhdGEpO1xyXG4gICAgICBmb3JtVmFsaWRhdG9yc1tcImFkZC1waG90by1mb3JtXCJdLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgIH0pICAgIFxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGFkZFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgZm9ybVZhbGlkYXRvcnNbXCJhZGQtcGhvdG8tZm9ybVwiXS5jbGVhcklucHV0cygpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGFkZFBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSwgXCJFcnJvciB3aGlsZSBjcmVhdGluZyBjYXJkISBQbGVhc2Ugd2FpdCBhbmQgdHJ5IGFnYWluLlwiKTtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGFkZFBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtyZW5kZXJlcjogcmVuZGVyQ2FyZH0sIFwiLmNhcmRzXCIpO1xyXG5cclxuY29uc3QgYXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShlZGl0QXZhdGFyUG9wdXAsIHtoYW5kbGVGb3JtU3VibWl0OiAoe2F2YXRhclVybH0pID0+IHtcclxuICBhdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUsIFwiQ2hhbmdpbmcgYXZhdGFyLi4uXCIpO1xyXG4gIGFwaS5wYXRjaEF2YXRhcih7YXZhdGFyOiBhdmF0YXJVcmx9KVxyXG4gIC50aGVuKCgpID0+IHtcclxuICAgIHVzZXIuc2V0QXZhdGFyKGF2YXRhclVybCk7XHJcbiAgICBmb3JtVmFsaWRhdG9yc1tcImF2YXRhci1mb3JtXCJdLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICB9KVxyXG4gIC50aGVuKCgpID0+IHtcclxuICAgICAgYXZhdGFyUG9wdXAuY2xvc2UoKTtcclxuICAgICAgZm9ybVZhbGlkYXRvcnNbXCJhdmF0YXItZm9ybVwiXS5jbGVhcklucHV0cygpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICBhdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUsIFwiRXJyb3Igd2hpbGUgY2hhbmdpbmcgYXZhdGFyISBQbGVhc2Ugd2FpdCBhbmQgdHJ5IGFnYWluXCIpO1xyXG4gIH0pXHJcbiAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgYXZhdGFyUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgfSk7XHJcbn19KTtcclxuXHJcbmNvbnN0IGRlbGV0ZURpYWxvZ3VlID0gbmV3IFBvcHVwRm9ybU5vRmllbGRzKFwiLmRlbGV0ZS1wb3B1cFwiLCB7aGFuZGxlRm9ybVN1Ym1pdDogaGFuZGxlRGVsZXRlU3VibWl0fSk7Ly9cIm9oIGhleSBtaWtlIHdoeSBkaWRuJ3QgeW91IGp1c3QgbWFrZSBhIGZ1bmN0aW9uIHRvIHBhc3MgaW50byB0aGUgb3RoZXIgY29uc3RydWN0b3JzP1wiIEJlY2F1c2UgSSB3YXMgaGF2aW5nIHN1Y2ggYW4gYWJ5c21hbCB0aW1lIHdpdGggZmlndXJpbmcgb3V0IGhvdyB0byBkZWxldGUsIEknbSBsZWF2aW5nIHRoZSBvdGhlcnMgYXMgaXMsIGRvbid0IGNhcmUgaWYgaXQgbG9va3MgbWVzc3lcclxuXHJcbmNvbnN0IGltYWdlQm94ID0gbmV3IFBvcHVwV2l0aEltYWdlKGNhcmRQcmV2aWV3UG9wdXApO1xyXG5cclxuLy9jYWxsc1xyXG5cclxuYXBpLmdldENhcmRzKClcclxuLnRoZW4oKGRhdGEpID0+IHtcclxuICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyhkYXRhKTtcclxufSlcclxuLmNhdGNoKChlcnIpID0+IHtcclxuICBjb25zb2xlLmxvZyhcIkVycm9yIHdoaWxlIGxvYWRpbmcgY2FyZHMhIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuIFwiICsgZXJyKTtcclxufSk7XHJcblxyXG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVFZGl0UHJvZmlsZUJ1dHRvbkNsaWNrKTtcclxuXHJcbmFkZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5kZWxldGVEaWFsb2d1ZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuYXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVFZGl0QXZhdGFyQ2xpY2spO1xyXG5cclxuYXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmluaXRpYWxpemVQcm9maWxlQXBpKCk7XHJcblxyXG5pbWFnZUJveC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQWRkQnV0dG9uQ2xpY2spO1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihjb25maWcpOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IHRoaXMuX29wdGlvbnMuYmFzZVVybDtcclxuICAgICAgICB0aGlzLmlzQ29tcGxldGUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvL3RoZSBiYXNpYyByb290IGZ1bmN0aW9ucyB0aGF0IHNlbmQgcmVxdWVzdHMgb3V0IG9yIGJyaW5ncyB0aGVtIGluLSBwYXJhbWV0ZXJpemVkIHdpdGggYW1tZW5kbWVudHMgdG8gdGhlIGZldGNoIGJvZHlcclxuXHJcbiAgICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVxdWVzdCh1cmwpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIHVybCwgdGhpcy5fb3B0aW9ucykudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKS5maW5hbGx5KCgpID0+IHt0aGlzLl9yZXNldCgpfSk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgX3Jlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuX29wdGlvbnMubWV0aG9kID0gXCJcIjtcclxuICAgICAgICB0aGlzLl9vcHRpb25zLmJvZHkgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIF9mZXRjaFggPSAoZW5kcG9pbnQsIGhvdykgPT4gey8vbmV3LCBjb25kZW5zZWQgaG90bmVzc1xyXG4gICAgICAgIHRoaXMuX29wdGlvbnMubWV0aG9kID0gaG93O1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGVuZHBvaW50KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX3NlbmRYID0gKGVuZHBvaW50LCBwYXJjZWwsIGhvdykgPT4gey8vbmV3IGNvbmRlbnNlZCBob3RuZXNzXHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucy5tZXRob2QgPSBob3c7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkocGFyY2VsKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChlbmRwb2ludCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9wdXR0aW5nIHRoZSByb290IGZ1bmN0aW9ucyB0byB0YXNrLSB0aGVzZSBhcmUgYWxsIFBVQkxJQ1xyXG5cclxuICAgIGdldENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mZXRjaFgoXCIvY2FyZHNcIiwgXCJHRVRcIik7XHJcbiAgICB9ICAgIFxyXG4gICAgXHJcbiAgICBwb3N0Q2FyZChwYXJjZWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFgoXCIvY2FyZHNcIiwgcGFyY2VsLCBcIlBPU1RcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcGF0Y2hDYXJkKHBhcmNlbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kWChcIi9jYXJkc1wiLCBwYXJjZWwsIFwiUEFUQ0hcIik7XHJcbiAgICB9XHJcblxyXG4gICAgbGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZldGNoWChgL2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIFwiUFVUXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHVubGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZldGNoWChgL2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIFwiREVMRVRFXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICAgICByZXR1cm4gdGhpcy5fZmV0Y2hYKGAvY2FyZHMvJHtjYXJkSWR9YCwgXCJERUxFVEVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICByZXR1cm4gdGhpcy5fZmV0Y2hYKFwiL3VzZXJzL21lXCIsIFwiR0VUXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHBhdGNoSW5mbyhwYXJjZWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFgoXCIvdXNlcnMvbWVcIiwgcGFyY2VsLCBcIlBBVENIXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHBhdGNoQXZhdGFyKHBhcmNlbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kWChcIi91c2Vycy9tZS9hdmF0YXJcIiwgcGFyY2VsLCBcIlBBVENIXCIpO1xyXG4gICAgfVxyXG4gICAgXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBqb2IgfSwgYXZhdGFyU2VsZWN0b3IpIHsgIFxyXG4gICAgdGhpcy5fcHJvZmlsZUluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm9cIik7XHJcbiAgICB0aGlzLl9uYW1lID0gdGhpcy5fcHJvZmlsZUluZm8ucXVlcnlTZWxlY3RvcihuYW1lKTtcclxuICAgIHRoaXMuX2pvYiA9IHRoaXMuX3Byb2ZpbGVJbmZvLnF1ZXJ5U2VsZWN0b3Ioam9iKTsgICAgXHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlck9iaiA9IHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2IudGV4dENvbnRlbnQsXHJcbiAgICAgIHNvdXJjZTogdGhpcy5fYXZhdGFyLnNyY1xyXG4gICAgfTtcclxuICAgIHJldHVybiB1c2VyT2JqO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuZXdOYW1lLCBuZXdKb2J9KSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmV3TmFtZTtcclxuICAgIHRoaXMuX2pvYi50ZXh0Q29udGVudCA9IG5ld0pvYjtcclxuICB9XHJcblxyXG4gIHNldEF2YXRhcihzb3VyY2UpIHsvL2tlZXBpbmcgdGhlIGF2YXRhciBoYW5kbGluZyBzZXBlcmF0ZSBmb3IgY2xhcml0eSdzIHNha2UuXHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gc291cmNlO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAvL2NvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIHNlbGVjdG9yKSB7XHJcbiAgY29uc3RydWN0b3Ioe3JlbmRlcmVyfSwgc2VsZWN0b3IpIHtcclxuICAgIC8vdGhpcy5faXRlbXMgPSBpdGVtczsvL251bGwnZCB0aGlzIHNvIHRoZSByZW5kZXJJdGVtcyBmdW5jIGNhbiBhY2NlcHQgYW55IGFycmF5IHlvdSBwYXNzIHRvIGl0LSBsaWtlLCBzYXksIGFuIGFycmF5IGZyb20gdGhlIGFwaVxyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXIoKSB7Ly9tYWRlIHRoaXMgcHVibGljIGJlY2F1c2UgSSBmb3VuZCBhIHVzZSBmb3IgaXQuIGVkaXQ6IE5vIEkgZGlkIG5vdC4gRGVsZXRlIHdvcmtzIGZpbmUgbm93LiBTdGlsbCBuaWNlIHRvIGhhdmUgdGhlIG51Y2xlYXIgb3B0aW9uIGluIHRoZSBiYWNrIG9mIHBvY2tldCwgSSBndWVzcz9cclxuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gIH1cclxuICBcclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gey8vYXMgSSBtZW50aW9uZWQgYWJvdmUgdGhpcyB3aWxsIG5vdyBhY2NlcHQgYW55IGFycmF5IHJhdGhlciB0aGFuIGJlaW5nIGRlcGVuZGVudCBvbiB3aGF0ZXZlciBpcyBwYXNzZWQgdG8gdGhlIGNvbnN0cnVjdG9yLlxyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pOyAgICBcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG4vL0kgbWFkZSB0aGlzIGNsYXMgb2JqZWN0IHRvIGhhbmRsZSBhIGZvcm0gd2l0aG91dCBhbnkgaW5wdXQgZmllbGRzIHRvIHJvdW5kIHVwIHdoaWNoIGlzIGludHJpbnNpYyB0byB0aGUgbm9ybWFsIGZvcm0gcG9wdXAgYW5kIHdpdGhvdXQgd2FudGluZyB0byB1bm5lY2Nlc2FyaWx5IGRhYmJsZSBpbiBwb2x5bW9ycGhpc21cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBGb3JtTm9GaWVsZHMgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB7aGFuZGxlRm9ybVN1Ym1pdH0pIHtcclxuICAgICAgICBzdXBlcih7cG9wdXBTZWxlY3Rvcn0pO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgdGhpcy5zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZVwiKTsvL21ha2luZyB0aGlzIHB1YmxpYyB0byBlbXVsYXRlIHZhbGlkYXRvciBtZXRob2RzIGFzIG5lZWRlZFxyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbk9yaWdpbmFsID0gdGhpcy5zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7Ly9zdG9yZXMgdGhlIHN1Ym1pdCBidXR0b24gaW5pdGlhbCB2YWx1ZSBhbmQga2VlcHMgaXQgc2FmZSBmcm9tIGV4dGVybmFsIG1lZGRsaW5nXHJcbiAgICB9XHJcblxyXG5cclxuc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5yZW5kZXJMb2FkaW5nKGJvb2wsIGxvYWRUZXh0KSB7XHJcbiAgICBpZihib29sKSB7ICAgICAgICBcclxuICAgICAgdGhpcy5zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBsb2FkVGV4dDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbk9yaWdpbmFsO1xyXG4gICAgfVxyXG59XHJcblxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cFBpY3R1cmUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LXBvcHVwXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWJveFwiKVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wcmV2aWV3LXBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX3BvcHVwU3VidGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1ib3hcIilcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucHJldmlldy1wb3B1cF9fc3VidGl0bGVcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wb3B1cFN1YnRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiaWQiLCJfaGFuZGxlTGlrZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiY2FyZExpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2NhcmREZWxldGVCdXR0b24iLCJfY2FyZEltYWdlIiwiX2NoZWNrTGlrZSIsImNsYXNzTGlzdCIsImFkZCIsImRlbGV0ZUVsZW1lbnQiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJfc2V0Q2FyZFByb3BlcnRpZXMiLCJzcmMiLCJhbHQiLCJfY2FyZFRpdGxlIiwidGV4dENvbnRlbnQiLCJnZW5lcmF0ZUNhcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsInRvZ2dsZUxpa2UiLCJjb250YWlucyIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9zdWJtaXRCdXR0b24iLCJpbnB1dEVsZW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2Vycm9yTWVzc2FnZUVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hpZGVJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzb21lIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJlbmFibGVTdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsInJlc2V0Rm9ybVZhbGlkYXRpb24iLCJpbnB1dCIsInRlc3QiLCJjb25zb2xlIiwibG9nIiwiY2xlYXJJbnB1dHMiLCJ2YWx1ZSIsImZvcm1WYWxpZGF0b3JzIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJjYXJkQWRkQnV0dG9uIiwidXNlckRhdGEiLCJqb2IiLCJhdmF0YXJCdXR0b24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX3BhZ2VPdmVybGF5IiwiX2Nsb3NlQnV0dG9uIiwiX3BvcHVwQm94Iiwib3BlbiIsIl9zZXRBbHRFdmVudExpc3RlbmVycyIsImNsb3NlIiwiX3Vuc2V0QWx0RXZlbnRMaXN0ZW5lcnMiLCJzZXRFdmVudExpc3RlbmVycyIsIl9oYW5kbGVFc2NDbG9zZSIsImtleSIsIl9oYW5kbGVQYWdlQ2xpY2siLCJ0YXJnZXQiLCJfaGFuZGxlQm94Q2xpY2siLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dHMiLCJfc3VibWl0QnV0dG9uT3JpZ2luYWwiLCJnZXRJbnB1dFZhbHVlcyIsIl91c2VyRGF0YSIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsImV2ZW50IiwicmVuZGVyTG9hZGluZyIsImJvb2wiLCJsb2FkVGV4dCIsImRlbGV0ZUlkZW50aWZpY2F0aW9uIiwiaGFuZGxlRGVsQnV0dG9uQ2xpY2siLCJjYXJkIiwiZGVsZXRlRGlhbG9ndWUiLCJyZW5kZXJDYXJkIiwibmV3Q2FyZEVsZW1lbnQiLCJoYW5kbGVQaG90b0NsaWNrIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwiaW1hZ2VCb3giLCJhcGkiLCJ1bmxpa2VDYXJkIiwidGhlbiIsImNhdGNoIiwiZXJyIiwibGlrZUNhcmQiLCJvcHRpb25zIiwiX29wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJpc0NvbXBsZXRlIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiX3JlcXVlc3QiLCJ1cmwiLCJmZXRjaCIsImZpbmFsbHkiLCJfcmVzZXQiLCJtZXRob2QiLCJib2R5IiwiX2ZldGNoWCIsImVuZHBvaW50IiwiaG93IiwiX3NlbmRYIiwicGFyY2VsIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldENhcmRzIiwicG9zdENhcmQiLCJwYXRjaENhcmQiLCJjYXJkSWQiLCJkZWxldGVDYXJkIiwiZ2V0VXNlckluZm8iLCJwYXRjaEluZm8iLCJwYXRjaEF2YXRhciIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidXNlciIsImF2YXRhclNlbGVjdG9yIiwiX3Byb2ZpbGVJbmZvIiwiX25hbWUiLCJfam9iIiwiX2F2YXRhciIsInNvdXJjZSIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJuZXdOYW1lIiwibmV3Sm9iIiwic2V0QXZhdGFyIiwicHJvZmlsZVBvcHVwIiwiYWJvdXRfbWUiLCJhYm91dCIsImFkZFBvcHVwIiwidGl0bGUiLCJpbWFnZV91cmwiLCJpbWFnZVVybCIsIm5ld09iaiIsInNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiY2xlYXIiLCJpbm5lckhUTUwiLCJyZW5kZXJJdGVtcyIsIml0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiYXZhdGFyUG9wdXAiLCJfcmVmMyIsImF2YXRhclVybCIsImF2YXRhciIsInN1Ym1pdEJ1dHRvbiIsIl9wb3B1cFBpY3R1cmUiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFN1YnRpdGxlIiwiY29uZmlnIiwiZmlsbFByb2ZpbGVGb3JtIiwiZm9ybSIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==